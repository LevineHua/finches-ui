{"version":3,"file":"useLabelWidth.mjs","sources":["../../../../../../../../../components/form/src/hooks/useLabelWidth.ts"],"sourcesContent":["/*\n * @Description:\n * @Author: 华松林\n * @Date: 2021-08-17 10:35:04\n * @LastEditors: 华松林\n * @LastEditTime: 2021-11-30 17:17:39\n * @FilePath: /finches-ui/packages/components/form/src/hooks/useLabelWidth.ts\n */\n// import type { Ref } from 'vue'\nimport { computed, unref } from 'vue'\nimport { isNumber } from '@finches-ui/utils/is'\n\nexport function useItemLabWidth(schemaItemRef: any, propsRef: any) {\n  return computed(() => {\n    const schemaItem = unref(schemaItemRef)\n    // labelCol： 表单域标签所占的栏数，共24栏\n    // wrapperCol：表单输入控件区所占的栏数\n    const { labelCol = {}, wrapperCol = {} } = schemaItem.itemProps || {}\n    const { labelWidth, disabledLabelWidth } = schemaItem\n\n    const {\n      labelWidth: globalLabelWidth,\n      labelCol: globalLabelCol,\n      wrapperCol: globalWrapperCol,\n      labelPosition,\n    } = unref(propsRef)\n\n    // propsRef 为 ElForm 的 prop 值；schemaItemRef 为 ElFormItem 的 Prop 值\n    // schemaItemRef 优先级大于 propsRef\n    // labelWidth 优先级大于 labelCol\n\n    if (\n      (!globalLabelWidth && !labelWidth && !globalLabelCol) ||\n      disabledLabelWidth\n    ) {\n      return {\n        labelCol: '200px',\n        wrapperCol: {\n          style: { paddingRight: labelPosition === 'top' ? '0' : '200px' },\n        },\n      }\n    }\n\n    let width = labelWidth || globalLabelWidth\n    let paddingRight = '0'\n    const col = { ...globalLabelCol, ...labelCol }\n    const wrapCol = { ...globalWrapperCol, ...wrapperCol }\n    const colSpan = col.span\n    const wrapColSpan = wrapCol.span\n\n    if (labelPosition !== 'top') {\n      if (width) {\n        width = isNumber(width) ? `${width}px` : width\n      } else if (colSpan || wrapColSpan) {\n        if (colSpan && !wrapColSpan) {\n          width = `calc((100% / 24) * ${colSpan})`\n          paddingRight = width\n        } else if (!colSpan && wrapColSpan) {\n          width = `calc((100% - ((100% / 24) * ${wrapColSpan})) / 2)`\n          paddingRight = width\n        } else {\n          width = `calc((100% / 24) * ${colSpan})`\n          paddingRight = `calc(100% - ((100% / 24) * ${colSpan + wrapColSpan}))`\n        }\n      }\n    }\n\n    // 返回计算后的 labelWidth 值，和 paddingRight 值\n    return {\n      labelCol: width,\n      wrapperCol: {\n        style: { paddingRight },\n      },\n    }\n  })\n}\n"],"names":[],"mappings":";;;yBAYgC,eAAoB,UAAe;AACjE,SAAO,SAAS,MAAM;AACpB,UAAM,aAAa,MAAM;AAGzB,UAAM,EAAE,WAAW,IAAI,aAAa,OAAO,WAAW,aAAa;AACnE,UAAM,EAAE,YAAY,uBAAuB;AAE3C,UAAM;AAAA,MACJ,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ;AAAA,QACE,MAAM;AAMV,QACG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBACtC,oBACA;AACA,aAAO;AAAA,QACL,UAAU;AAAA,QACV,YAAY;AAAA,UACV,OAAO,EAAE,cAAc,kBAAkB,QAAQ,MAAM;AAAA;AAAA;AAAA;AAK7D,QAAI,QAAQ,cAAc;AAC1B,QAAI,eAAe;AACnB,UAAM,MAAM,KAAK,mBAAmB;AACpC,UAAM,UAAU,KAAK,qBAAqB;AAC1C,UAAM,UAAU,IAAI;AACpB,UAAM,cAAc,QAAQ;AAE5B,QAAI,kBAAkB,OAAO;AAC3B,UAAI,OAAO;AACT,gBAAQ,SAAS,SAAS,GAAG,YAAY;AAAA,iBAChC,WAAW,aAAa;AACjC,YAAI,WAAW,CAAC,aAAa;AAC3B,kBAAQ,sBAAsB;AAC9B,yBAAe;AAAA,mBACN,CAAC,WAAW,aAAa;AAClC,kBAAQ,+BAA+B;AACvC,yBAAe;AAAA,eACV;AACL,kBAAQ,sBAAsB;AAC9B,yBAAe,8BAA8B,UAAU;AAAA;AAAA;AAAA;AAM7D,WAAO;AAAA,MACL,UAAU;AAAA,MACV,YAAY;AAAA,QACV,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;;;;"}